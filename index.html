<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Void IQ Test</title>
  <style>
    body {
      background-color: #0d0d0d;
      color: #f5f5f5;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 0;
    }
    .container {
      display: flex;
      flex-direction: row;
      width: 90vw;
      margin-top: 20px;
    }
    .main {
      flex: 2;
      margin-right: 20px;
    }
    .sidebar {
      flex: 1;
      background-color: #1e1e1e;
      padding: 10px;
      border-radius: 10px;
    }
    input:disabled {
      background-color: #444;
      color: #ccc;
      border: none;
    }
  </style>
</head>
<body>
  <h1>Void IQ Test</h1>
  <input type="text" id="name" placeholder="Enter your cursed name" />
  <button onclick="startQuiz()">Start Quiz</button>

  <div class="container">
    <div class="main">
      <div id="quiz"></div>
      <div id="result"></div>
      <div id="history"></div>
    </div>
    <div class="sidebar">
      <h3>Highest IQs</h3>
      <div id="highScores"></div>
      <h3>Lowest IQs</h3>
      <div id="lowScores"></div>
    </div>
  </div>

  <script>
    const allQuestions = [
      "If you have 4 paint cans and cats can only swim on Mondays, how many hot dogs do you have?",
      "What color is the smell of math?",
      "On a scale of purple to banana, rate your last sneeze.",
      "If the moon was made of cheese, how many tacos fit in a bus?",
      "How many ducks can dance on the head of a pin while solving calculus?",
      // Add more absurd questions...
    ];

    const memeSounds = [
      'https://www.myinstants.com/media/sounds/vine-boom.mp3',
      'https://www.myinstants.com/media/sounds/windows-xp-error.mp3',
      'https://www.myinstants.com/media/sounds/spongebob-fail.mp3',
      'https://www.myinstants.com/media/sounds/fart-with-reverb.mp3',
      'https://www.myinstants.com/media/sounds/among-us.mp3'
    ];

    let username = localStorage.getItem('username');
    const nameInput = document.getElementById("name");

    if (username) {
      nameInput.value = username;
      nameInput.disabled = true;
    }

    function startQuiz() {
      if (!username) {
        const inputName = nameInput.value.trim();
        if (!inputName) {
          alert("Enter a cursed name to begin.");
          return;
        }
        username = inputName;
        localStorage.setItem('username', username);
        nameInput.disabled = true;
      }

      const quizDiv = document.getElementById("quiz");
      const selectedIndices = [];
      while (selectedIndices.length < 5) {
        const i = Math.floor(Math.random() * allQuestions.length);
        if (!selectedIndices.includes(i)) selectedIndices.push(i);
      }
      quizDiv.innerHTML = '';
      selectedIndices.forEach((i, index) => {
        const q = allQuestions[i];
        const inputType = Math.random() > 0.5 ? 'text' : 'radio';
        let html = `<p>${q}</p>`;
        if (inputType === 'text') {
          html += `<input type='text' id='q${index}' /><br/>`;
        } else {
          html += `
            <label><input type='radio' name='q${index}' value='yes'/>Yes</label>
            <label><input type='radio' name='q${index}' value='no'/>No</label>
            <label><input type='radio' name='q${index}' value='maybe'/>Maybe</label><br/>
          `;
        }
        quizDiv.innerHTML += html;
      });
      quizDiv.innerHTML += `<button onclick='submitQuiz()'>Submit</button>`;
    }

    function submitQuiz() {
      const responses = [];
      for (let i = 0; i < 5; i++) {
        const textInput = document.getElementById(`q${i}`);
        const radio = document.querySelector(`input[name='q${i}']:checked`);
        responses.push(textInput ? textInput.value : (radio ? radio.value : 'none'));

        const sound = new Audio(memeSounds[Math.floor(Math.random() * memeSounds.length)]);
        sound.play();
      }
      const iq = Math.floor(Math.random() * 200);
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = `<h2>Your IQ: ${iq}</h2><button onclick='startQuiz()'>Retake Quiz</button>`;

      const attempt = { name: username, iq, responses };
      const history = JSON.parse(localStorage.getItem("quizHistory") || "[]");
      history.push(attempt);
      localStorage.setItem("quizHistory", JSON.stringify(history));
      renderHistory();
      renderLeaderboards();
    }

    function renderHistory() {
      const history = JSON.parse(localStorage.getItem("quizHistory") || "[]");
      const historyDiv = document.getElementById("history");
      historyDiv.innerHTML = '<h3>Your Quiz History</h3>';
      history.filter(h => h.name === username).forEach((entry, i) => {
        historyDiv.innerHTML += `<p>IQ: ${entry.iq} - ${entry.responses.join(', ')}</p>`;
      });
    }

    function renderLeaderboards() {
      const history = JSON.parse(localStorage.getItem("quizHistory") || "[]");
      const sortedHigh = [...history].sort((a,b) => b.iq - a.iq).slice(0,5);
      const sortedLow = [...history].sort((a,b) => a.iq - b.iq).slice(0,5);
      const highScores = document.getElementById("highScores");
      const lowScores = document.getElementById("lowScores");
      highScores.innerHTML = sortedHigh.map(e => `<p>${e.name}: ${e.iq}</p>`).join('');
      lowScores.innerHTML = sortedLow.map(e => `<p>${e.name}: ${e.iq}</p>`).join('');
    }

    renderHistory();
    renderLeaderboards();
  </script>
</body>
</html>
